{
  "builders": [
    {
      "type":          "amazon-ebs",
      "region":        "eu-west-1",
      "source_ami":    "ami-8e987ef9",
      "instance_type": "c3.xlarge",
      "ssh_username":  "ubuntu",
      "ami_name":      "packer-quick-start {{timestamp}}"
    }
  ],
  "provisioners": [
    {
      "type":          "shell",
      "script":        "packer/base.sh"
    },
    {
      "type":          "shell",
      "start_retry_timeout": "5m",
      "inline": [
        "echo ready",
        "mkdir -p /tmp/ansible"
      ]
    },
    {
      "type":          "file",
      "source":        "credentials/",
      "destination":   "/tmp/ansible/credentials"
    },
    {
      "type":          "file",
      "source":        "inventory/",
      "destination":   "/tmp/ansible/inventory"
    },
    {
      "type":          "file",
      "source":        "playbooks/",
      "destination":   "/tmp/ansible/playbooks"
    }
  ]
}
